<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="./style.css" />
    <title>Twilio Outreach Solution Blueprint</title>
  </head>
  <body>
    <header><h1>Twilio Outreach Solution Blueprint</h1></header>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="application/javascript" src="/controller.js"></script>
    <main>
      <div>
        <h2>Selected Studio Flow</h2>
        <form>
          Selected Studio Flow:
          <select id="flow-selector" onchange="selectFlow(null);">
          </select>
        </form>
        <script>
          fillFlowSelector();
        </script>
        <br/>
      </div>

      <section>
        <div class="flow-loader"></div>
        <div id="flow-deploy" style="display: none;" class="deployer">
          <h4>Your Studio Flow is not yet deployed</h4>
          <a class="button" onclick="deployStudioFlow(event);">Deploy Studio Flow</a>
          <div id="flow-loader button-loader" style="display: none;"></div>
        </div>
        <div id="flow-deployed" style="display: none;" class="deployer">
          <h4><span class="checkmark">&#10003;</span> Your Studio Flow is deployed</h4>
          <a id="flow-open" class="button button-outline" href="" target="_blank">Open Studio Flow</a>
          <p><b>FLOW REST API URL:</b>&nbsp<i id="flow-rest-api-url"></i></p>
        </div>
      </section>

      <div>
        <h2>Upload</h2>

        <div>
          <input type="file" id="patient-file" accept="text/csv" style="display:none">
          <button class="button" id="select-file">Select csv file to upload</button>
          <p>
            selected file name: <span id="file-name"></span><br/>
            selected file size (bytes): <span id="file-size">0</span><br/>
            selected file type: <span id="file-type"></span><br/>
          </p>
          <button class="button" id="process-file" disabled>Process File</button>
        </div>
        <script>
          const selectedFile = document.getElementById('patient-file').files[0];
          console.log(selectedFile);
        </script>
      </div>

      <div>
        <h2>Download</h2>

        <button class="button" id="downloadResponses">Download Responses</button>
        <br/>
      </div>
    </main>

    <footer>
      <p>
        Made with ðŸ’– by your friends at
        <a href="https://www.twilio.com">Twilio</a>
      </p>
    </footer>
  </body>
</html>
